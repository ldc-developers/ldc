format_version: '8'
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
project_type: ios

app:
  envs:
    - BITRISE_PROJECT_PATH: bitrise-test/bitrise-test.xcodeproj
    - BITRISE_SCHEME: bitrise-test
    - BITRISE_EXPORT_METHOD: development

workflows:
  primary:
    steps:
      - cache-pull@2.1.4: {}
      - certificate-and-profile-installer@1.10.3: {}

      - xcode-build-for-test@0.4.0:
          title: Build Xcode Project

      - virtual-device-testing-for-ios@0.9.10:
          title: Run Tests on Device
          inputs:
            - test_devices: iphone6,12.2,en,portrait
            - download_test_results: true

      - deploy-to-bitrise-io@1.9.6: {}
      - cache-push@2.2.3: {}
